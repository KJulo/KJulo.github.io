---
import { languageTag } from "@paraglide/runtime";
import * as message from "@paraglide/messages";

import Hyperlink from "@commons/Hyperlink/Hyperlink.astro";
import Tag from "@components/commons/Tag/Tag.astro";

import { localizePathname } from "@utils/language";

import { createExperienceList } from "./utils";

const EXPERIENCES = createExperienceList(message);
---

<div class="flex h-full flex-col content-start gap-4 p-4">
  <Tag color="yellow" text={message.experience_tag()} class="self-start" />
  <ul class="flex flex-col gap-4">
    {
      EXPERIENCES.map((experience, index) => (
        <li
          class:list={[
            "flex flex-row justify-between gap-4",
            `${index + 1 !== EXPERIENCES.length ? "border-b pb-4" : ""}`,
          ]}
        >
          <div class="flex flex-col items-start text-left">
            <span>{experience.ROLE}</span>
            <span>{experience.COMPANY}</span>
          </div>
          <div class="text-right">
            <span>{experience.DATE}</span>
          </div>
        </li>
      ))
    }
  </ul>
  <Hyperlink
    href={localizePathname("/resume", languageTag())}
    target=""
    class="mt-auto self-end"
  >
    {message.experience_action()}
  </Hyperlink>
</div>
